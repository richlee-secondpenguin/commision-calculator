<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìˆ˜ìˆ˜ë£Œ ì •ì±… ì¤‘ë³µ ì ìš© ê³„ì‚°ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .input-section {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .input-row {
            display: flex;
            gap: 30px;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .input-group {
            flex: 1;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #4285f4;
        }
        
        .calc-button {
            padding: 12px 30px;
            background-color: #4285f4;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 28px;
        }
        
        .calc-button:hover {
            background-color: #3367d6;
        }
        
        .results-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        .result-section {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .result-header {
            font-size: 20px;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
            padding-bottom: 10px;
            border-bottom: 3px solid #4285f4;
        }
        
        .result-description {
            font-size: 13px;
            color: #666;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 13px;
        }
        
        th, td {
            padding: 10px 8px;
            text-align: right;
            border-bottom: 1px solid #e0e0e0;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #333;
            font-size: 12px;
        }
        
        td:first-child, th:first-child {
            text-align: left;
        }
        
        .tier-name {
            font-weight: 500;
            color: #555;
        }
        
        .total-row {
            background-color: #f8f9fa;
            font-weight: 700;
        }
        
        .summary-box {
            background-color: #e8f0fe;
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .summary-item:last-child {
            margin-bottom: 0;
            padding-top: 10px;
            border-top: 2px solid #4285f4;
            font-weight: 700;
            font-size: 16px;
        }
        
        .summary-label {
            color: #333;
        }
        
        .summary-value {
            color: #1967d2;
            font-weight: 600;
        }
        
        .comparison-box {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 6px;
            margin-top: 20px;
            border-left: 4px solid #ffc107;
        }
        
        .comparison-title {
            font-weight: 700;
            color: #333;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .comparison-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 13px;
        }
        
        .highlight {
            background-color: #fff9c4;
        }
        
        @media (max-width: 1200px) {
            .results-container {
                grid-template-columns: 1fr;
            }
        }
        
        .note {
            background-color: #f1f3f4;
            padding: 12px;
            border-radius: 6px;
            margin-top: 15px;
            font-size: 12px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ìˆ˜ìˆ˜ë£Œ ì •ì±… ì¤‘ë³µ ì ìš© ê³„ì‚°ê¸°</h1>
        <p class="subtitle">êµ¬ê°„ë³„ ìˆ˜ìˆ˜ë£Œ í• ì¸ + ëˆ„ì  ê±°ë˜ì•¡ ê¸°ë°˜ ìˆ˜ìˆ˜ë£Œ ì¸í•˜ ì¤‘ë³µ ì ìš© ì‹œë®¬ë ˆì´ì…˜</p>
        
        <div class="input-section">
            <div class="input-row">
                <div class="input-group">
                    <label for="baseRate">ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œìœ¨ (%)</label>
                    <input type="number" id="baseRate" value="4" step="0.1" min="0" max="10">
                </div>
                <div class="input-group">
                    <label for="monthlyAmount">í•´ë‹¹ ì›” ê²°ì œê¸ˆì•¡ (ì›)</label>
                    <input type="number" id="monthlyAmount" value="400000000" step="1000000">
                </div>
                <button class="calc-button" onclick="calculate()">ê³„ì‚°í•˜ê¸°</button>
            </div>
        </div>
        
        <div class="results-container">
            <!-- ë°©ì•ˆ 1 -->
            <div class="result-section">
                <div class="result-header">ë°©ì•ˆ 1: í• ì¸ìœ¨ ëˆ„ì  ì ìš©</div>
                <div class="result-description">
                    ì¸í•˜ëœ ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œìœ¨ì„ ê¸°ì¤€ìœ¼ë¡œ ëª¨ë“  êµ¬ê°„ì— í• ì¸ìœ¨ì„ ì¶”ê°€ ì ìš©í•©ë‹ˆë‹¤.
                </div>
                
                <table id="table1">
                    <thead>
                        <tr>
                            <th>êµ¬ê°„</th>
                            <th>ëŒ€ìƒê¸ˆì•¡</th>
                            <th>í• ì¸ìœ¨</th>
                            <th>ì ìš©ìœ¨</th>
                            <th>ìˆ˜ìˆ˜ë£Œ</th>
                            <th>í• ì¸ì•¡</th>
                        </tr>
                    </thead>
                    <tbody id="tbody1">
                    </tbody>
                </table>
                
                <div class="summary-box">
                    <div class="summary-item">
                        <span class="summary-label">ì´ ìˆ˜ìˆ˜ë£Œ (ë¶€ê°€ì„¸ ì œì™¸)</span>
                        <span class="summary-value" id="total1">-</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">ë¶€ê°€ì„¸ (10%)</span>
                        <span class="summary-value" id="vat1">-</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">ìµœì¢… ìˆ˜ìˆ˜ë£Œ (ë¶€ê°€ì„¸ í¬í•¨)</span>
                        <span class="summary-value" id="final1">-</span>
                    </div>
                </div>
                
                <div class="note">
                    <strong>íŠ¹ì§•:</strong> ëª¨ë“  êµ¬ê°„ì—ì„œ í• ì¸ í˜œíƒì„ ë°›ì„ ìˆ˜ ìˆì–´ ê³ ê°ì‚¬ ë§Œì¡±ë„ê°€ ë†’ìŠµë‹ˆë‹¤.
                </div>
            </div>
            
            <!-- ë°©ì•ˆ 2 -->
            <div class="result-section">
                <div class="result-header">ë°©ì•ˆ 2: êµ¬ê°„ ê¸°ì¤€ ìƒí–¥</div>
                <div class="result-description">
                    í• ì¸ í›„ ìˆ˜ìˆ˜ë£Œìœ¨ì´ ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œìœ¨ë³´ë‹¤ ë‚®ì€ êµ¬ê°„ë§Œ í• ì¸ì„ ì ìš©í•©ë‹ˆë‹¤.
                </div>
                
                <table id="table2">
                    <thead>
                        <tr>
                            <th>êµ¬ê°„</th>
                            <th>ëŒ€ìƒê¸ˆì•¡</th>
                            <th>í• ì¸ìœ¨</th>
                            <th>ì ìš©ìœ¨</th>
                            <th>ìˆ˜ìˆ˜ë£Œ</th>
                            <th>í• ì¸ì•¡</th>
                        </tr>
                    </thead>
                    <tbody id="tbody2">
                    </tbody>
                </table>
                
                <div class="summary-box">
                    <div class="summary-item">
                        <span class="summary-label">ì´ ìˆ˜ìˆ˜ë£Œ (ë¶€ê°€ì„¸ ì œì™¸)</span>
                        <span class="summary-value" id="total2">-</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">ë¶€ê°€ì„¸ (10%)</span>
                        <span class="summary-value" id="vat2">-</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">ìµœì¢… ìˆ˜ìˆ˜ë£Œ (ë¶€ê°€ì„¸ í¬í•¨)</span>
                        <span class="summary-value" id="final2">-</span>
                    </div>
                </div>
                
                <div class="note">
                    <strong>íŠ¹ì§•:</strong> ì—­ì „ í˜„ìƒì„ ì™„ì „íˆ ì°¨ë‹¨í•˜ì—¬ ì˜ˆì¸¡ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.
                </div>
            </div>
        </div>
        
        <div class="comparison-box">
            <div class="comparison-title">ğŸ“Š ë‘ ë°©ì•ˆ ë¹„êµ</div>
            <div class="comparison-item">
                <span>ë°©ì•ˆ 1 ì ˆê°ì•¡ (ê¸°ë³¸ 5% ëŒ€ë¹„):</span>
                <span id="saving1">-</span>
            </div>
            <div class="comparison-item">
                <span>ë°©ì•ˆ 2 ì ˆê°ì•¡ (ê¸°ë³¸ 5% ëŒ€ë¹„):</span>
                <span id="saving2">-</span>
            </div>
            <div class="comparison-item" style="font-weight: 700; margin-top: 10px; padding-top: 10px; border-top: 1px solid #ffc107;">
                <span>ì°¨ì•¡ (ë°©ì•ˆ1 - ë°©ì•ˆ2):</span>
                <span id="difference">-</span>
            </div>
        </div>
    </div>
    
    <script>
        const tiers = [
            { name: "3ì²œë§Œì› ë¯¸ë§Œ", min: 0, max: 30000000, discountRate: 0 },
            { name: "3ì²œë§Œì›~5ì²œë§Œì›", min: 30000000, max: 50000000, discountRate: 0.10 },
            { name: "5ì²œë§Œì›~1ì–µì›", min: 50000000, max: 100000000, discountRate: 0.20 },
            { name: "1ì–µì›~3ì–µì›", min: 100000000, max: 300000000, discountRate: 0.30 },
            { name: "3ì–µì› ì´ˆê³¼", min: 300000000, max: Infinity, discountRate: 0.50 }
        ];
        
        function formatNumber(num) {
            return 'â‚©' + Math.round(num).toLocaleString('ko-KR');
        }
        
        function formatPercent(num) {
            return (num * 100).toFixed(1) + '%';
        }
        
        function calculateTierAmount(totalAmount, tier) {
            if (totalAmount <= tier.min) return 0;
            if (totalAmount >= tier.max) return tier.max - tier.min;
            return totalAmount - tier.min;
        }
        
        function calculate() {
            const baseRate = parseFloat(document.getElementById('baseRate').value) / 100;
            const monthlyAmount = parseFloat(document.getElementById('monthlyAmount').value);
            
            if (isNaN(baseRate) || isNaN(monthlyAmount) || monthlyAmount <= 0) {
                alert('ì˜¬ë°”ë¥¸ ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ë°©ì•ˆ 1: í• ì¸ìœ¨ ëˆ„ì  ì ìš©
            let tbody1 = document.getElementById('tbody1');
            tbody1.innerHTML = '';
            let total1 = 0;
            let totalDiscount1 = 0;
            
            tiers.forEach(tier => {
                const tierAmount = calculateTierAmount(monthlyAmount, tier);
                if (tierAmount > 0) {
                    const baseFee = tierAmount * baseRate;
                    const appliedRate = baseRate * (1 - tier.discountRate);
                    const discountedFee = baseFee * (1 - tier.discountRate);
                    const discount = baseFee - discountedFee;
                    
                    total1 += discountedFee;
                    totalDiscount1 += discount;
                    
                    const row = `
                        <tr>
                            <td class="tier-name">${tier.name}</td>
                            <td>${formatNumber(tierAmount)}</td>
                            <td>${formatPercent(tier.discountRate)}</td>
                            <td>${formatPercent(appliedRate)}</td>
                            <td>${formatNumber(discountedFee)}</td>
                            <td>${formatNumber(discount)}</td>
                        </tr>
                    `;
                    tbody1.innerHTML += row;
                }
            });
            
            // ë°©ì•ˆ 2: êµ¬ê°„ ê¸°ì¤€ ìƒí–¥
            let tbody2 = document.getElementById('tbody2');
            tbody2.innerHTML = '';
            let total2 = 0;
            let totalDiscount2 = 0;
            
            tiers.forEach(tier => {
                const tierAmount = calculateTierAmount(monthlyAmount, tier);
                if (tierAmount > 0) {
                    const baseFee = tierAmount * baseRate;
                    
                    // ê¸°ì¡´ êµ¬ê°„ë³„ í• ì¸ ì •ì±…ì˜ ì›ë˜ ìˆ˜ìˆ˜ë£Œìœ¨ (5% ê¸°ì¤€)
                    const originalDiscountedRate = 0.05 * (1 - tier.discountRate);
                    
                    // ì›ë˜ í• ì¸ ìˆ˜ìˆ˜ë£Œìœ¨ì´ í˜„ì¬ ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œìœ¨ë³´ë‹¤ ë‚®ì€ ê²½ìš°ë§Œ í• ì¸ ì ìš©
                    let actualFee, discount, appliedRate;
                    if (originalDiscountedRate < baseRate) {
                        // í• ì¸ ì ìš©: ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œìœ¨ì— í• ì¸ìœ¨ ì ìš©
                        appliedRate = baseRate * (1 - tier.discountRate);
                        actualFee = tierAmount * appliedRate;
                        discount = baseFee - actualFee;
                    } else {
                        // í• ì¸ ë¯¸ì ìš©: ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œìœ¨ ì ìš©
                        appliedRate = baseRate;
                        actualFee = baseFee;
                        discount = 0;
                    }
                    
                    total2 += actualFee;
                    totalDiscount2 += discount;
                    
                    const appliedClass = discount > 0 ? 'class="highlight"' : '';
                    const row = `
                        <tr ${appliedClass}>
                            <td class="tier-name">${tier.name}</td>
                            <td>${formatNumber(tierAmount)}</td>
                            <td>${formatPercent(tier.discountRate)}</td>
                            <td>${formatPercent(appliedRate)}</td>
                            <td>${formatNumber(actualFee)}</td>
                            <td>${formatNumber(discount)}</td>
                        </tr>
                    `;
                    tbody2.innerHTML += row;
                }
            });
            
            // í•©ê³„ í–‰ ì¶”ê°€
            const totalRow1 = `
                <tr class="total-row">
                    <td>í•©ê³„</td>
                    <td>${formatNumber(monthlyAmount)}</td>
                    <td>-</td>
                    <td>-</td>
                    <td>${formatNumber(total1)}</td>
                    <td>${formatNumber(totalDiscount1)}</td>
                </tr>
            `;
            tbody1.innerHTML += totalRow1;
            
            const totalRow2 = `
                <tr class="total-row">
                    <td>í•©ê³„</td>
                    <td>${formatNumber(monthlyAmount)}</td>
                    <td>-</td>
                    <td>-</td>
                    <td>${formatNumber(total2)}</td>
                    <td>${formatNumber(totalDiscount2)}</td>
                </tr>
            `;
            tbody2.innerHTML += totalRow2;
            
            // ìš”ì•½ ì •ë³´ ì—…ë°ì´íŠ¸
            const vat1 = total1 * 0.1;
            const final1 = total1 + vat1;
            document.getElementById('total1').textContent = formatNumber(total1);
            document.getElementById('vat1').textContent = formatNumber(vat1);
            document.getElementById('final1').textContent = formatNumber(final1);
            
            const vat2 = total2 * 0.1;
            const final2 = total2 + vat2;
            document.getElementById('total2').textContent = formatNumber(total2);
            document.getElementById('vat2').textContent = formatNumber(vat2);
            document.getElementById('final2').textContent = formatNumber(final2);
            
            // ë¹„êµ ì •ë³´
            const originalFee = monthlyAmount * 0.05 * 1.1;
            const saving1 = originalFee - final1;
            const saving2 = originalFee - final2;
            const difference = final2 - final1;
            
            document.getElementById('saving1').textContent = formatNumber(saving1) + ' (' + formatPercent(saving1/originalFee) + ')';
            document.getElementById('saving2').textContent = formatNumber(saving2) + ' (' + formatPercent(saving2/originalFee) + ')';
            
            let differenceText;
            if (Math.abs(difference) < 1) {
                differenceText = formatNumber(0) + ' (ë™ì¼)';
            } else if (difference > 0) {
                differenceText = formatNumber(difference) + ' (ë°©ì•ˆ2ê°€ ë” ë¹„ìŒˆ)';
            } else {
                differenceText = formatNumber(Math.abs(difference)) + ' (ë°©ì•ˆ1ì´ ë” ë¹„ìŒˆ)';
            }
            document.getElementById('difference').textContent = differenceText;
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ê³„ì‚°
        window.onload = calculate;
    </script>
</body>
</html>
