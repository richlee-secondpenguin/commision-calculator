<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìˆ˜ìˆ˜ë£Œ ì •ì±… 3ê°€ì§€ ë°©ì•ˆ ë¹„êµ ê³„ì‚°ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1800px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .input-section {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .input-row {
            display: flex;
            gap: 30px;
            align-items: center;
        }
        
        .input-group {
            flex: 1;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #4285f4;
        }
        
        .calc-button {
            padding: 12px 30px;
            background-color: #4285f4;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 28px;
        }
        
        .calc-button:hover {
            background-color: #3367d6;
        }
        
        .results-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .column {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        h2 {
            color: #333;
            font-size: 18px;
            margin-bottom: 10px;
            border-bottom: 3px solid #4285f4;
            padding-bottom: 10px;
        }
        
        .description {
            font-size: 13px;
            color: #666;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            font-size: 12px;
        }
        
        th {
            background-color: #f8f9fa;
            padding: 10px 8px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #dee2e6;
            font-size: 11px;
        }
        
        td {
            padding: 10px 8px;
            border-bottom: 1px solid #f1f3f4;
        }
        
        .tier-name {
            font-weight: 500;
            color: #333;
        }
        
        .total-row {
            font-weight: 700;
            background-color: #f8f9fa;
            border-top: 2px solid #dee2e6;
        }
        
        .summary {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 13px;
        }
        
        .summary-item:last-child {
            margin-bottom: 0;
            padding-top: 10px;
            border-top: 2px solid #dee2e6;
            font-weight: 700;
        }
        
        .note {
            background-color: #f1f3f4;
            padding: 12px;
            border-radius: 6px;
            font-size: 11px;
            color: #666;
            line-height: 1.5;
        }
        
        .comparison {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .comparison h2 {
            border-bottom-color: #34a853;
        }
        
        .highlight {
            background-color: #fff9c4;
        }
        
        @media (max-width: 1400px) {
            .results-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ìˆ˜ìˆ˜ë£Œ ì •ì±… 3ê°€ì§€ ë°©ì•ˆ ë¹„êµ ê³„ì‚°ê¸°</h1>
        <p class="subtitle">êµ¬ê°„ë³„ ìˆ˜ìˆ˜ë£Œ í• ì¸ + ëˆ„ì  ê±°ë˜ì•¡ ê¸°ë°˜ ìˆ˜ìˆ˜ë£Œ ì¸í•˜ ì¤‘ë³µ ì ìš© ì‹œë®¬ë ˆì´ì…˜</p>
        
        <div class="input-section">
            <div class="input-row">
                <div class="input-group">
                    <label for="baseRate">ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œìœ¨ (%)</label>
                    <input type="number" id="baseRate" value="4" step="0.1" min="0" max="10">
                </div>
                <div class="input-group">
                    <label for="monthlyAmount">í•´ë‹¹ ì›” ê²°ì œê¸ˆì•¡ (ì›)</label>
                    <input type="number" id="monthlyAmount" value="200000000" step="1000000">
                </div>
                <button class="calc-button" onclick="calculate()">ê³„ì‚°í•˜ê¸°</button>
            </div>
        </div>
        
        <div class="results-container">
            <!-- ë°©ì•ˆ 1 -->
            <div class="column">
                <h2>ë°©ì•ˆ 1: í• ì¸ìœ¨ ëˆ„ì  ì ìš©</h2>
                <p class="description">ì¸í•˜ëœ ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œìœ¨ì„ ê¸°ì¤€ìœ¼ë¡œ ëª¨ë“  êµ¬ê°„ì— í• ì¸ìœ¨ì„ ì¶”ê°€ ì ìš©í•©ë‹ˆë‹¤.</p>
                
                <table id="table1">
                    <thead>
                        <tr>
                            <th>êµ¬ê°„</th>
                            <th>ëŒ€ìƒê¸ˆì•¡</th>
                            <th>í• ì¸ìœ¨</th>
                            <th>ì ìš©ìœ¨</th>
                            <th>ìˆ˜ìˆ˜ë£Œ</th>
                            <th>í• ì¸ì•¡</th>
                        </tr>
                    </thead>
                    <tbody id="tbody1"></tbody>
                </table>

                <div class="summary">
                    <div class="summary-item">
                        <span>ì´ ìˆ˜ìˆ˜ë£Œ (ë¶€ê°€ì„¸ ì œì™¸)</span>
                        <strong id="total1">â‚©0</strong>
                    </div>
                    <div class="summary-item">
                        <span>ë¶€ê°€ì„¸ (10%)</span>
                        <strong id="vat1">â‚©0</strong>
                    </div>
                    <div class="summary-item">
                        <span>ìµœì¢… ìˆ˜ìˆ˜ë£Œ (ë¶€ê°€ì„¸ í¬í•¨)</span>
                        <strong id="final1">â‚©0</strong>
                    </div>
                </div>

                <div class="note">
                    <strong>íŠ¹ì§•:</strong> ëª¨ë“  êµ¬ê°„ì—ì„œ í• ì¸ í˜œíƒì„ ë°›ì„ ìˆ˜ ìˆì–´ ê³ ê°ì‚¬ ë§Œì¡±ë„ê°€ ë†’ìŠµë‹ˆë‹¤.
                </div>
            </div>

            <!-- ë°©ì•ˆ 2 -->
            <div class="column">
                <h2>ë°©ì•ˆ 2: êµ¬ê°„ ê¸°ì¤€ ìƒí–¥</h2>
                <p class="description">5% ê¸°ì¤€ í• ì¸ìœ¨ ì ìš©, ë‹¨ ì—­ì „ í˜„ìƒ ë°©ì§€ë¥¼ ìœ„í•´ ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œìœ¨ë³´ë‹¤ ë‚®ì€ êµ¬ê°„ë§Œ í• ì¸ ì ìš©í•©ë‹ˆë‹¤.</p>
                
                <table id="table2">
                    <thead>
                        <tr>
                            <th>êµ¬ê°„</th>
                            <th>ëŒ€ìƒê¸ˆì•¡</th>
                            <th>í• ì¸ìœ¨</th>
                            <th>ì ìš©ìœ¨</th>
                            <th>ìˆ˜ìˆ˜ë£Œ</th>
                            <th>í• ì¸ì•¡</th>
                        </tr>
                    </thead>
                    <tbody id="tbody2"></tbody>
                </table>

                <div class="summary">
                    <div class="summary-item">
                        <span>ì´ ìˆ˜ìˆ˜ë£Œ (ë¶€ê°€ì„¸ ì œì™¸)</span>
                        <strong id="total2">â‚©0</strong>
                    </div>
                    <div class="summary-item">
                        <span>ë¶€ê°€ì„¸ (10%)</span>
                        <strong id="vat2">â‚©0</strong>
                    </div>
                    <div class="summary-item">
                        <span>ìµœì¢… ìˆ˜ìˆ˜ë£Œ (ë¶€ê°€ì„¸ í¬í•¨)</span>
                        <strong id="final2">â‚©0</strong>
                    </div>
                </div>

                <div class="note">
                    <strong>íŠ¹ì§•:</strong> ì—­ì „ í˜„ìƒì„ ì™„ì „íˆ ì°¨ë‹¨í•˜ë©°, 5% ê¸°ì¤€ í• ì¸ìœ¨ì„ ê³ ì • ì ìš©í•©ë‹ˆë‹¤. (ê°•ì¡° í–‰ì€ ì‹¤ì œ í• ì¸ ì ìš© êµ¬ê°„)
                </div>
            </div>

            <!-- ë°©ì•ˆ 3 -->
            <div class="column">
                <h2>ë°©ì•ˆ 3: êµ¬ê°„ë³„ í• ì¸ë§Œ ì ìš©</h2>
                <p class="description">ê¸°ì¡´ 5% ê¸°ì¤€ êµ¬ê°„ë³„ ìˆ˜ìˆ˜ë£Œ í• ì¸ ì •ì±…ë§Œ ì ìš©í•©ë‹ˆë‹¤. (ëˆ„ì  ê±°ë˜ì•¡ ì¸í•˜ ì—†ìŒ)</p>
                
                <table id="table3">
                    <thead>
                        <tr>
                            <th>êµ¬ê°„</th>
                            <th>ëŒ€ìƒê¸ˆì•¡</th>
                            <th>í• ì¸ìœ¨</th>
                            <th>ì ìš©ìœ¨</th>
                            <th>ìˆ˜ìˆ˜ë£Œ</th>
                            <th>í• ì¸ì•¡</th>
                        </tr>
                    </thead>
                    <tbody id="tbody3"></tbody>
                </table>

                <div class="summary">
                    <div class="summary-item">
                        <span>ì´ ìˆ˜ìˆ˜ë£Œ (ë¶€ê°€ì„¸ ì œì™¸)</span>
                        <strong id="total3">â‚©0</strong>
                    </div>
                    <div class="summary-item">
                        <span>ë¶€ê°€ì„¸ (10%)</span>
                        <strong id="vat3">â‚©0</strong>
                    </div>
                    <div class="summary-item">
                        <span>ìµœì¢… ìˆ˜ìˆ˜ë£Œ (ë¶€ê°€ì„¸ í¬í•¨)</span>
                        <strong id="final3">â‚©0</strong>
                    </div>
                </div>

                <div class="note">
                    <strong>íŠ¹ì§•:</strong> ê¸°ì¡´ êµ¬ê°„ë³„ í• ì¸ ì •ì±…(5% ê¸°ì¤€)ë§Œ ì ìš©ë˜ì–´, ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œìœ¨ ì¸í•˜ í˜œíƒì´ ì—†ìŠµë‹ˆë‹¤.
                </div>
            </div>
        </div>

        <div class="comparison">
            <h2>ğŸ“Š ë°©ì•ˆ ë¹„êµ</h2>
            <div class="summary">
                <div class="summary-item">
                    <span>ë°©ì•ˆ 1 ì ˆê°ì•¡ (ê¸°ë³¸ 5% ëŒ€ë¹„):</span>
                    <strong id="saving1">â‚©0 (0.0%)</strong>
                </div>
                <div class="summary-item">
                    <span>ë°©ì•ˆ 2 ì ˆê°ì•¡ (ê¸°ë³¸ 5% ëŒ€ë¹„):</span>
                    <strong id="saving2">â‚©0 (0.0%)</strong>
                </div>
                <div class="summary-item">
                    <span>ë°©ì•ˆ 3 ì ˆê°ì•¡ (ê¸°ë³¸ 5% ëŒ€ë¹„):</span>
                    <strong id="saving3">â‚©0 (0.0%)</strong>
                </div>
                <div class="summary-item highlight">
                    <span>ì°¨ì•¡ (ë°©ì•ˆ1 - ë°©ì•ˆ2):</span>
                    <strong id="difference12">â‚©0</strong>
                </div>
                <div class="summary-item highlight">
                    <span>ì°¨ì•¡ (ë°©ì•ˆ1 - ë°©ì•ˆ3):</span>
                    <strong id="difference13">â‚©0</strong>
                </div>
                <div class="summary-item highlight">
                    <span>ì°¨ì•¡ (ë°©ì•ˆ2 - ë°©ì•ˆ3):</span>
                    <strong id="difference23">â‚©0</strong>
                </div>
            </div>
        </div>
    </div>

    <script>
        const tiers = [
            { name: "3ì²œë§Œì› ë¯¸ë§Œ", min: 0, max: 30000000, discountRate: 0 },
            { name: "3ì²œë§Œì›~5ì²œë§Œì›", min: 30000000, max: 50000000, discountRate: 0.10 },
            { name: "5ì²œë§Œì›~1ì–µì›", min: 50000000, max: 100000000, discountRate: 0.20 },
            { name: "1ì–µì›~3ì–µì›", min: 100000000, max: 300000000, discountRate: 0.30 },
            { name: "3ì–µì› ì´ˆê³¼", min: 300000000, max: Infinity, discountRate: 0.50 }
        ];

        function formatNumber(num) {
            return 'â‚©' + Math.round(num).toLocaleString('ko-KR');
        }

        function formatPercent(rate) {
            return (rate * 100).toFixed(2) + '%';
        }

        function calculateTierAmount(totalAmount, tier) {
            if (totalAmount <= tier.min) return 0;
            if (totalAmount <= tier.max) return totalAmount - tier.min;
            return tier.max - tier.min;
        }

        function calculate() {
            const baseRate = parseFloat(document.getElementById('baseRate').value) / 100;
            const monthlyAmount = parseFloat(document.getElementById('monthlyAmount').value);

            if (isNaN(baseRate) || isNaN(monthlyAmount) || baseRate < 0 || monthlyAmount < 0) {
                alert('ì˜¬ë°”ë¥¸ ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ë°©ì•ˆ 1: í• ì¸ìœ¨ ëˆ„ì  ì ìš©
            let tbody1 = document.getElementById('tbody1');
            tbody1.innerHTML = '';
            let total1 = 0;
            let totalDiscount1 = 0;
            
            tiers.forEach(tier => {
                const tierAmount = calculateTierAmount(monthlyAmount, tier);
                if (tierAmount > 0) {
                    const baseFee = tierAmount * baseRate;
                    const appliedRate = baseRate * (1 - tier.discountRate);
                    const discountedFee = baseFee * (1 - tier.discountRate);
                    const discount = baseFee - discountedFee;
                    
                    total1 += discountedFee;
                    totalDiscount1 += discount;
                    
                    const row = `
                        <tr>
                            <td class="tier-name">${tier.name}</td>
                            <td>${formatNumber(tierAmount)}</td>
                            <td>${formatPercent(tier.discountRate)}</td>
                            <td>${formatPercent(appliedRate)}</td>
                            <td>${formatNumber(discountedFee)}</td>
                            <td>${formatNumber(discount)}</td>
                        </tr>
                    `;
                    tbody1.innerHTML += row;
                }
            });

            const totalRow1 = `
                <tr class="total-row">
                    <td>í•©ê³„</td>
                    <td>${formatNumber(monthlyAmount)}</td>
                    <td>-</td>
                    <td>-</td>
                    <td>${formatNumber(total1)}</td>
                    <td>${formatNumber(totalDiscount1)}</td>
                </tr>
            `;
            tbody1.innerHTML += totalRow1;

            // ë°©ì•ˆ 2: êµ¬ê°„ ê¸°ì¤€ ìƒí–¥ (5% ê¸°ì¤€ ê³ ì • í• ì¸ìœ¨)
            let tbody2 = document.getElementById('tbody2');
            tbody2.innerHTML = '';
            let total2 = 0;
            let totalDiscount2 = 0;
            
            tiers.forEach(tier => {
                const tierAmount = calculateTierAmount(monthlyAmount, tier);
                if (tierAmount > 0) {
                    const baseFee = tierAmount * baseRate;
                    
                    // 5% ê¸°ì¤€ ê³ ì • í• ì¸ìœ¨ ì ìš©
                    const fixedDiscountedRate = 0.05 * (1 - tier.discountRate);
                    
                    // 5% ê¸°ì¤€ í• ì¸ ìˆ˜ìˆ˜ë£Œìœ¨ì´ í˜„ì¬ ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œìœ¨ë³´ë‹¤ ë‚®ì€ ê²½ìš°ë§Œ ì ìš©
                    let actualFee, discount, appliedRate;
                    if (fixedDiscountedRate < baseRate) {
                        // í• ì¸ ì ìš©: 5% ê¸°ì¤€ í• ì¸ ìˆ˜ìˆ˜ë£Œìœ¨ ì ìš©
                        appliedRate = fixedDiscountedRate;
                        actualFee = tierAmount * fixedDiscountedRate;
                        discount = baseFee - actualFee;
                    } else {
                        // í• ì¸ ë¯¸ì ìš©: ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œìœ¨ ì ìš© (ì—­ì „ ë°©ì§€)
                        appliedRate = baseRate;
                        actualFee = baseFee;
                        discount = 0;
                    }
                    
                    total2 += actualFee;
                    totalDiscount2 += discount;
                    
                    const appliedClass = discount > 0 ? 'class="highlight"' : '';
                    const row = `
                        <tr ${appliedClass}>
                            <td class="tier-name">${tier.name}</td>
                            <td>${formatNumber(tierAmount)}</td>
                            <td>${formatPercent(tier.discountRate)}</td>
                            <td>${formatPercent(appliedRate)}</td>
                            <td>${formatNumber(actualFee)}</td>
                            <td>${formatNumber(discount)}</td>
                        </tr>
                    `;
                    tbody2.innerHTML += row;
                }
            });

            const totalRow2 = `
                <tr class="total-row">
                    <td>í•©ê³„</td>
                    <td>${formatNumber(monthlyAmount)}</td>
                    <td>-</td>
                    <td>-</td>
                    <td>${formatNumber(total2)}</td>
                    <td>${formatNumber(totalDiscount2)}</td>
                </tr>
            `;
            tbody2.innerHTML += totalRow2;

            // ë°©ì•ˆ 3: êµ¬ê°„ë³„ í• ì¸ë§Œ ì ìš© (5% ê¸°ì¤€, í•­ìƒ ì ìš©)
            let tbody3 = document.getElementById('tbody3');
            tbody3.innerHTML = '';
            let total3 = 0;
            let totalDiscount3 = 0;
            
            tiers.forEach(tier => {
                const tierAmount = calculateTierAmount(monthlyAmount, tier);
                if (tierAmount > 0) {
                    const originalBaseFee = tierAmount * 0.05; // í•­ìƒ 5% ê¸°ì¤€
                    const appliedRate = 0.05 * (1 - tier.discountRate);
                    const actualFee = tierAmount * appliedRate;
                    const discount = originalBaseFee - actualFee;
                    
                    total3 += actualFee;
                    totalDiscount3 += discount;
                    
                    const row = `
                        <tr>
                            <td class="tier-name">${tier.name}</td>
                            <td>${formatNumber(tierAmount)}</td>
                            <td>${formatPercent(tier.discountRate)}</td>
                            <td>${formatPercent(appliedRate)}</td>
                            <td>${formatNumber(actualFee)}</td>
                            <td>${formatNumber(discount)}</td>
                        </tr>
                    `;
                    tbody3.innerHTML += row;
                }
            });

            const totalRow3 = `
                <tr class="total-row">
                    <td>í•©ê³„</td>
                    <td>${formatNumber(monthlyAmount)}</td>
                    <td>-</td>
                    <td>-</td>
                    <td>${formatNumber(total3)}</td>
                    <td>${formatNumber(totalDiscount3)}</td>
                </tr>
            `;
            tbody3.innerHTML += totalRow3;

            // ìš”ì•½ ì •ë³´ ì—…ë°ì´íŠ¸
            const vat1 = total1 * 0.1;
            const vat2 = total2 * 0.1;
            const vat3 = total3 * 0.1;
            const final1 = total1 + vat1;
            const final2 = total2 + vat2;
            const final3 = total3 + vat3;

            document.getElementById('total1').textContent = formatNumber(total1);
            document.getElementById('vat1').textContent = formatNumber(vat1);
            document.getElementById('final1').textContent = formatNumber(final1);

            document.getElementById('total2').textContent = formatNumber(total2);
            document.getElementById('vat2').textContent = formatNumber(vat2);
            document.getElementById('final2').textContent = formatNumber(final2);

            document.getElementById('total3').textContent = formatNumber(total3);
            document.getElementById('vat3').textContent = formatNumber(vat3);
            document.getElementById('final3').textContent = formatNumber(final3);

            // ë¹„êµ ì •ë³´
            const originalFee = monthlyAmount * 0.05 * 1.1;
            const saving1 = originalFee - final1;
            const saving2 = originalFee - final2;
            const saving3 = originalFee - final3;

            document.getElementById('saving1').textContent = formatNumber(saving1) + ' (' + formatPercent(saving1/originalFee) + ')';
            document.getElementById('saving2').textContent = formatNumber(saving2) + ' (' + formatPercent(saving2/originalFee) + ')';
            document.getElementById('saving3').textContent = formatNumber(saving3) + ' (' + formatPercent(saving3/originalFee) + ')';

            // ì°¨ì•¡ ê³„ì‚°
            const diff12 = final1 - final2;
            const diff13 = final1 - final3;
            const diff23 = final2 - final3;

            function formatDifference(diff) {
                if (Math.abs(diff) < 1) {
                    return formatNumber(0) + ' (ë™ì¼)';
                } else if (diff > 0) {
                    return formatNumber(diff) + ' (ì• ë°©ì•ˆì´ ë” ë¹„ìŒˆ)';
                } else {
                    return formatNumber(Math.abs(diff)) + ' (ë’¤ ë°©ì•ˆì´ ë” ë¹„ìŒˆ)';
                }
            }

            document.getElementById('difference12').textContent = formatDifference(diff12);
            document.getElementById('difference13').textContent = formatDifference(diff13);
            document.getElementById('difference23').textContent = formatDifference(diff23);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ê³„ì‚°
        window.onload = calculate;
    </script>
</body>
</html>
